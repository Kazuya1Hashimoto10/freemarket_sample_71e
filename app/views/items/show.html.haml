

.d-header
  = render partial: 'layouts/header', locals: { header: @header }

.d-main
  .d-showMain
    .d-content
      .d-itemBox
        .d-itemBox__name
          =@item.name
        .d-itemBox__body
          -# 画像をDBから取得できるよう編集予定
          
          %ul
            %li
              = image_tag @item.images[0].src.url
              %ul
                - @item.images.each do |image|
                  %li
                    = image_tag image.src.url, :width => "75", :height => "75"
                  

        .d-itemBox__price
          ¥
          =@item.price
          .d-itemBox__price-detail
            %span (税込)
            %span 送料込み
        .d-itemDetail
          .noticeMsg
            %p
              =@item.description
        .d-table
          %table
            %tbody
              %tr
                %th 出品者
                %td
                  -#便宜的にbrand_idを使用。user_idで名前を取得できるよう設定予定
                  = @item.user.nickname
              %tr
                %th カテゴリー
                %td.d-table--blue
                  =@item.category.name
              %tr
                %th ブランド
                %td 
                  =@item.brand.name
              %tr
                %th 商品のサイズ
                %td 
                  =@item.size
              %tr
                %th 商品の状態
                %td
                  =@item.condition
              %tr
                %th 配送料の負担
                %td 
                  =@item.postage
              %tr
                %th 発送元の地域
                %td.d-table--blue
                  = @item.prefecture.name
              %tr
                %th 発送日の目安
                %td 
                  =@item.wait
        .d-optonalArea
          %ul
            %li.d-optinalBtn.d-likeBtn
              =icon('fa','star')
              お気に入り 0
          %ul.d-optional
            %li.d-optionalBtn
              %a{:href => "#"}
                =icon('fa','flag')
                不適切な商品の通報
      .d-itemChangeBox
        %ul.d-itemChangeBox__btnList
          -if @item.buyer_id.present?
            %li.d-itemChangeBox__btnList__soldOutNotice
              売り切れました
          -elsif user_signed_in? && current_user.id == @item.brand_id
            %li
              = button_to "商品の編集", edit_item_path(@item), id: "d-edit", method: :get
            or
            %li
              = button_to "この商品を削除する", item_path(@item), method: :delete, data: {confirm: "削除しますか？"}

          -else
            %li
              %button.d-itemChangeBox__btnList__buyBtn
                = link_to purchase_index_path(@item) do
                  購入画面に進む
      .d-commentBox
        .d-comment__list
          -# コメント機能実装時編集
          -# - if @comments
          -#   - @comments.each do |comment|
          -#     = link_to comment.user.name, "/users/#{comment.user_id}"
          -#     = comment.text

        -if @item.buyer_id.present? && user_signed_in?
          -# 便宜的に@itemを当てていますが、@commentが入る予定です。:nameも：textだと思います
          =form_for @item do |f|
            = f.text_area :name, disabled: true
          .d-noticeMsg
            %p
              相手のことを考え丁寧なコメントを心がけましょう。
              %br 不快な言葉遣いなどは利用制限や退会処分となることがあります。
          %br
          =button_tag type: 'submit',class:'d-commentBtn', disabled: true do
            売り切れのためコメントできません
        -elsif user_signed_in?
          -# 便宜的に@itemを当てていますが、@commentが入る予定です。:nameも：textだと思います
          =form_for @item do |f|
            = f.text_area :name
          .d-noticeMsg
            %p
              相手のことを考え丁寧なコメントを心がけましょう。
              %br 不快な言葉遣いなどは利用制限や退会処分となることがあります。
          %br
          =button_tag type: 'submit',class:'d-commentBtn' do
            = icon('fa','comment')
            コメントする
        -else

    %ur.d-links
      %li 
        =link_to "<前の商品"
      %li 
        =link_to "後ろの商品>"
    .d-relatedItems
      =link_to "カテゴリをもっと見る"
      
.d-footer


